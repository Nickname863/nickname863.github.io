<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      .container {
        display: flex;
        background-color: DodgerBlue;
        height: 100vh;
      }

      .containerRow {
        flex-direction: row;
      }

      .containerColumn {
        flex-direction: column;
      }

      .childElement {
        flex: 1;
        display: flex;
      }
      .actionBar {
        width: 100%;
        height: 1.5rem;
        position: absolute;
        top: 0;
        left: 0;
        background-color: wheat;
      }
    </style>
  </head>

  <body>
    <div class="actionBar">
      Twitch Name <input type="text" id="twitchNameId" name="twitchChat" value="piwoyt">
      Youtube Chat Popout URL <input type="text" id="youtubeNameId" name="youtubeChat" value="">
      Make Vertical <input type="checkboxVertical" id="horizontalCheckboxId" name="horizontalCheckbox" value="false" onchange="ToggleHorizontalButton(this);"/>
      <button type="button" onclick="UpdateChats()">Update</button> 
    </div>

    <div id="chatContainer" class="container containerRow">
      <iframe
        id="twitchEmbed"
        src="https://www.twitch.tv/embed/piwoyt/chat?parent=nickname863.github.io"
        class="childElement"
      >
      </iframe>

      <iframe
        id="youtubeEmbed"
        allowfullscreen=""
        frameborder="0"
        src="https://www.youtube.com/live_chat?v=nourl&embed_domain=nickname863.github.io"
        class="childElement"
      ></iframe>
    </div>

    <script>
      var chatContainer = document.getElementById("chatContainer");

      var twitchBaseUrl = "https://www.twitch.tv/embed/<placeholder>/chat?parent=nickname863.github.io";
      var youtubeBaseUrl = "https://www.youtube.com/live_chat?v<placeholder>&embed_domain=nickname863.github.io";

      var youtubeIframe = document.getElementById("youtubeEmbed");
      var twitchIframe = document.getElementById("twitchEmbed");

      var twitch = document.getElementById("twitchNameId");
      var youtube = document.getElementById("youtubeNameId");
      var checkboxVertical = document.getElementById("checkboxVertical");
      checkboxVertical.value = localStorage.isVertical;
      ToggleHorizontal(!localStorage.isVertical);

      UpdateChats();

      function ToggleHorizontalButton(input){
          ToggleHorizontal(input.value);
      }

      function ToggleHorizontal(input){

        if(input){
          chatContainer.classList.replace("containerRow","containerColumn")
        }else{
          chatContainer.classList.replace("containerColumn","containerRow")
        }

        localStorage.isVertical = input;

      }


      function UpdateChats()
      {


          var splitArray = youtube.value.split("&v");
          var videoId = myParam = splitArray[splitArray.length-1];
          var twitchUsername = twitch.value;

          youtubeIframe.src = youtubeBaseUrl.replace("<placeholder>", videoId);
          twitchIframe.src = twitchBaseUrl.replace("<placeholder>", twitchUsername);

          localStorage.youtubeValue = youtube.value;
          localStorage.twitchUsername = twitchUsername;

      }



    </script>
  </body>
</html>
<!-- end -->
